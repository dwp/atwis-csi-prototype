{% set page = "claim" %}
{% set claim = "true" %}
{% set title = "Case details" %}

{% extends folder + "/claim/_CSIBASE.html" %}

{% block csi %}


<form action="" method="post" novalidate>


  <div class="govuk-width-container">
    <!-- <a href="#" class="govuk-back-link">Back</a> -->

    <main class="govuk-main-wrapper">

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

  <div class="govuk-form-group">
             <fieldset class="govuk-fieldset">
               <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                 <h2 class="govuk-fieldset__heading">
Is {% if phase == "john" %}John Smith{% endif %}{% if phase == "sonya" %}Sonya Corkery{% endif %}{% if not phase %}Dereck Smith{% endif %} available for a workplace assessment on any of the following days?
                 </h2>
               </legend>




               <p>A workplace assessment can last up to 90 minutes and must take place between 8am and 6pm.</p>
               <p>Dates exclude public holidays and weekends:</p>
               <ul id="future-dates" class="govuk-list govuk-list--bullet"></ul>
                 <script>
                   const today = new Date();
                   let days = 0;
                   let futureDate = new Date();
                   const dateList = [];

                   // Add 8 weekdays to today's date
                {% if data['wpa-type']=='Face-to-face'%}while (days < 10){% else %}while (days < 8){% endif %} {
                     futureDate.setDate(futureDate.getDate() + 1);
                     const day = futureDate.getDay();
                     if (day !== 0 && day !== 6) {
                       days++;
                       dateList.push(new Date(futureDate));
                     }
                   }

                   // Display the future dates on the HTML page
                   const list = dateList
                     .map(
                       date =>
                         `<li>${date.toLocaleDateString("en-GB", {
                           day: "numeric",
                           month: "long",
                           year: "numeric"
                         })}</li>`
                     )
                     .join("");
                   document.getElementById("future-dates").innerHTML = list;
                 </script>




<script>
//get todays Date
var today = new Date();
var days = 0;
var futureDate = new Date();

//Add 8 weekdays to todays Date
while (days < 8) {
  futureDate.setDate(futureDate.getDate() + 1);
  var day = futureDate.getDay();
  if (day !== 0 && day !== 6) {
    days++;
}
}

//formate
var options = { day: 'numeric', month: 'long', year: 'numeric'
};
var formattedDate = futureDate.toLocaleDateString('en-GB', options);

// Display the future date on the page
document.getElementById("future-date").innerHTML =
formattedDate;
</script>




               <div class="govuk-radios ">
                 <div class="govuk-radios__item">
                   <input class="govuk-radios__input" id="wpa-availability" name="wpa-availability" type="radio" value="Yes~/live-42/cases/workplace-assesment/availability/others" {{ checked("wpa-availability", "Yes") }}>
                   <label class="govuk-label govuk-radios__label" for="wpa-availability">
                    Yes
                   </label>
                 </div>
                  <div class="govuk-radios__item">
                 <input class="govuk-radios__input" id="wpa-availability" name="wpa-availability" type="radio" value="No~4-weeks" {{ checked("wpa-availability", "No") }}>
                 <label class="govuk-label govuk-radios__label" for="wpa-availability">
                  No
                 </label>
               </div>


               <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="wpa-availability" name="wpa-availability" type="radio" value="I’m waiting for an answer~/live-42/cases/claim#business-case" {{ checked("wpa-availability", "I’m waiting for an answer") }}>
              <label class="govuk-label govuk-radios__label" for="wpa-availability">
            I’m waiting for an answer
              </label>
            </div>

                 </fieldset>
               </div>


           <button class="govuk-button" data-module="govuk-button">
             Save and continue
           </button>
         </form>
       </div>
     </div>


   </main>
   </div>



{% endblock %}
